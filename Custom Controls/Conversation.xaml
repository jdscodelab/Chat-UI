<UserControl x:Class="ChatUI.Custom_Controls.Conversation"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:ChatUI.Custom_Controls"
             mc:Ignorable="d" x:Name="_Conversations" Height="Auto" Width="Auto" Background="WhiteSmoke">
    <UserControl.Resources>
        
        <!--Just now what we did here is We inherited the Button Style of our previoud "Add New Button" to our play button, so instead or rewriting the template we inherited-->
        <Style x:Key="PlayButtonStyle" TargetType="{x:Type Button}" BasedOn="{StaticResource ButtonStyle}">
            <Setter Property="Margin" Value="18,0,0,0"/>
            
            <!--Since we only want to show it when audio track is received from our contact-->
            <Setter Property="Visibility" Value="Collapsed"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsAudioTrack, FallbackValue=Collapsed, TargetNullValue=Collapsed}"  Value="Visible">
                    <Setter Property="Visibility" Value="Visible"/>
                </DataTrigger>
            </Style.Triggers>            
        </Style>
        
        <!--We also need to style our text message and audiotrack path-->
        <Style x:Key="AudioTrack" TargetType="{x:Type Path}">
            <Setter Property="Fill" Value="#F54A4A"/>
            <Setter Property="Height" Value="27"/>
            <Setter Property="Width" Value="250"/>
            <Setter Property="Stretch" Value="Fill"/>
            <Setter Property="Margin" Value="18,0,0,0"/>
            <Setter Property="Visibility" Value="Collapsed"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding MessageStatus}" Value="Sent">
                    <Setter Property="Fill" Value="White"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding IsAudioTrack, FallbackValue=Collapsed, TargetNullValue=Collapsed}"  Value="Visible">
                    <Setter Property="Visibility" Value="Visible"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
        
        <!--Message Style-->
        <Style x:Key="MessageStyle" TargetType="{x:Type TextBlock}">
            <Setter Property="FontSize" Value="15"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Margin" Value="20"/>
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            
            <!--our message color will also change on sent and received-->
            <Style.Triggers>
                <DataTrigger Binding="{Binding MessageStatus}" Value="Sent">
                    <Setter Property="Foreground" Value="White"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
        
        <Style TargetType="{x:Type ListBoxItem}">
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="Height" Value="Auto"/>
            <Setter Property="Padding" Value="4,1"/>
            <Setter Property="HorizontalContentAlignment" Value="{Binding HorizontalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
            <Setter Property="VerticalContentAlignment" Value="{Binding VerticalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ListBoxItem}">
                        <Border x:Name="border" BorderBrush="{TemplateBinding  BorderBrush}" Background="{TemplateBinding Background}" BorderThickness="{TemplateBinding BorderThickness}" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="True" Margin="10,20,10,10">
                            
                            <!--We need our bubble to show on right when message is sent & on left when message is received-->
                            <Grid>
                                <Grid.Style>
                                    <Style TargetType="{x:Type Grid}">
                                        <Setter Property="HorizontalAlignment" Value="Right"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding MessageStatus}" Value="Received">
                                                <Setter Property="HorizontalAlignment" Value="Left"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Grid.Style>
                                
                                <!--Lets design our Message bubble-->
                                <Border CornerRadius="30" Height="Auto" MinHeight="60" MinWidth="200" HorizontalAlignment="Right" Width="Auto" VerticalAlignment="Top" Margin="0,0,0,20">
                                    <Border.Style>                                        
                                        <!--Since we want our message bubble to be in white color in left and reddish on right-->
                                        <Style TargetType="{x:Type Border}">
                                            <Setter Property="Background" Value="White"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding MessageStatus}" Value="Sent">
                                                    <Setter Property="Background" Value="#F54A4A"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Border.Style>
                                    
                                    
                                    <!--To that that bubble shape we need to draw path, just copy and paste the data. i will be providing link in the description--> 
                                    <Grid>
                                        <Path Data="M13,0.1875C5.925781,0.1875 0.1875,5.253906 0.1875,11.5 0.1875,14.675781 1.675781,17.539063 4.0625,19.59375 3.542969,22.601563 0.175781,23.828125 0.40625,24.65625 3.414063,25.902344 9.378906,23.011719 10.28125,22.5625 11.15625,22.730469 12.070313,22.8125 13,22.8125 20.074219,22.8125 25.8125,17.746094 25.8125,11.5 25.8125,5.253906 20.074219,0.1875 13,0.1875z" VerticalAlignment="Bottom" RenderTransformOrigin="0.5,0.5" Height="54.75" MinHeight="50" Width="58" MinWidth="58" Stretch="Uniform">
                                            <Path.Style>
                                                <!--Since we need to flip our bubble endpoint from right to left and vice versa we will set trigger on horizontal alignment for our path and doing so will also change our path color from red to white and vice versa-->
                                                <Style TargetType="{x:Type Path}">
                                                    <Setter Property="Fill" Value="White"/>
                                                    <Setter Property="HorizontalAlignment" Value="Left"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding MessageStatus}" Value="Sent">
                                                            <Setter Property="Fill" Value="#F54A4A"/>
                                                            <Setter Property="HorizontalAlignment" Value="Right"/>
                                                            
                                                            <!--Since we need to flip our Message bubble endpoint from right to left-->
                                                            <Setter Property="RenderTransform">
                                                                <Setter.Value>
                                                                    <ScaleTransform ScaleX="-1"/>
                                                                </Setter.Value>
                                                            </Setter>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Path.Style>                                            
                                        </Path>
                                        <DockPanel>
                                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">

                                                <!--Our play button, audio track and message text will be here-->
                                                <Button Style="{StaticResource PlayButtonStyle}">
                                                    <Image Source="/assets/play.png" Stretch="Uniform" Width="15"/>
                                                </Button>

                                                <!--audio track.. path data is too long to write so i will just paste it-->
                                                <Path Data="M266,11.5 C267.10458,11.499992 268,12.395423 268,13.499992 268,14.604562 267.10458,15.499992 266,15.499991 264.89542,15.499992 264,14.604562 264,13.499992 264,12.395423 264.89542,11.499992 266,11.5 z M19.999989,11.5 C21.10457,11.499992 22,12.395423 22.000021,13.499992 22,14.604562 21.10457,15.499992 19.999989,15.499991 18.89543,15.499992 18,14.604562 18.000002,13.499992 18,12.395423 18.89543,11.499992 19.999989,11.5 z M13.999993,11.5 C15.104569,11.499992 16,12.395423 15.999991,13.499992 16,14.604562 15.104569,15.499992 13.999993,15.499991 12.895431,15.499992 12,14.604562 12.000007,13.499992 12,12.395423 12.895431,11.499992 13.999993,11.5 z M7.9999871,11.5 C9.1045694,11.499992 10,12.395423 10.000003,13.499992 10,14.604562 9.1045694,15.499992 7.9999871,15.499991 6.8954306,15.499992 6,14.604562 6.0000062,13.499992 6,12.395423 6.8954306,11.499992 7.9999871,11.5 z M1.9999982,11.5 C3.1045694,11.499992 4,12.395423 3.9999964,13.499992 4,14.604562 3.1045694,15.499992 1.9999982,15.499991 0.89543051,15.499992 0,14.604562 0,13.499992 0,12.395423 0.89543051,11.499992 1.9999982,11.5 z M380,11.499994 C381.10458,11.499992 382,12.395423 382,13.499992 382,14.604562 381.10458,15.499992 380,15.499991 378.89542,15.499992 378,14.604562 378,13.499992 378,12.395423 378.89542,11.499992 380,11.499994 z M374,11.499994 C375.10458,11.499992 376,12.395423 376,13.499992 376,14.604562 375.10458,15.499992 374,15.499991 372.89542,15.499992 372,14.604562 372,13.499992 372,12.395423 372.89542,11.499992 374,11.499994 z M368,11.499994 C369.10458,11.499992 370,12.395423 370,13.499992 370,14.604562 369.10458,15.499992 368,15.499991 366.89542,15.499992 366,14.604562 366,13.499992 366,12.395423 366.89542,11.499992 368,11.499994 z M362,11.499994 C363.10458,11.499992 364,12.395423 364,13.499992 364,14.604562 363.10458,15.499992 362,15.499991 360.89542,15.499992 360,14.604562 360,13.499992 360,12.395423 360.89542,11.499992 362,11.499994 z M272,11.499994 C273.10458,11.499992 274,12.395423 274,13.499992 274,14.604562 273.10458,15.499992 272,15.499991 270.89542,15.499992 270,14.604562 270,13.499992 270,12.395423 270.89542,11.499992 272,11.499994 z M356,10.499992 C357.10458,10.499992 358,11.395423 358,12.49999 L358,14.499994 C358,15.604562 357.10458,16.499992 356,16.499992 354.89542,16.499992 354,15.604562 354,14.499994 L354,12.49999 C354,11.395423 354.89542,10.499992 356,10.499992 z M338,10.499992 C339.10458,10.499992 340,11.395423 340,12.49999 L340,14.499994 C340,15.604562 339.10458,16.499992 338,16.499992 336.89542,16.499992 336,15.604562 336,14.499994 L336,12.49999 C336,11.395423 336.89542,10.499992 338,10.499992 z M170,10.499992 C171.10457,10.499992 172,11.395423 172,12.499979 L172,14.500006 C172,15.604562 171.10457,16.499992 170,16.499998 168.89543,16.499992 168,15.604562 168,14.500006 L168,12.499979 C168,11.395423 168.89543,10.499992 170,10.499992 z M278,10.499986 C279.10458,10.499992 280,11.395423 280,12.499985 L280,14.5 C280,15.604562 279.10458,16.499992 278,16.500004 276.89542,16.499992 276,15.604562 276,14.5 L276,12.499985 C276,11.395423 276.89542,10.499992 278,10.499986 z M25.999994,10.499986 C27.10457,10.499992 28,11.395423 27.999998,12.499979 L27.999998,14.500006 C28,15.604562 27.10457,16.499992 25.999994,16.500004 24.89543,16.499992 24,15.604562 23.999996,14.500006 L23.999996,12.499979 C24,11.395423 24.89543,10.499992 25.999994,10.499986 z M284,9.4999959 C285.10458,9.4999924 286,10.395423 286,11.499994 L286,15.499991 C286,16.604562 285.10458,17.499992 284,17.499989 282.89542,17.499992 282,16.604562 282,15.499991 L282,11.499994 C282,10.395423 282.89542,9.4999924 284,9.4999959 z M32,9.4999959 C33.104568,9.4999924 34,10.395423 33.999989,11.5 L33.999989,15.499991 C34,16.604562 33.104568,17.499992 32,17.499989 30.89543,17.499992 30,16.604562 29.99999,15.499991 L29.99999,11.5 C30,10.395423 30.89543,9.4999924 32,9.4999959 z M350,9.4999902 C351.10458,9.4999924 352,10.395423 352,11.5 L352,15.499985 C352,16.604562 351.10458,17.499992 350,17.499995 348.89542,17.499992 348,16.604562 348,15.499985 L348,11.5 C348,10.395423 348.89542,9.4999924 350,9.4999902 z M332,8.4999938 C333.10458,8.4999924 334,9.3954229 334,10.499992 L334,16.499992 C334,17.604562 333.10458,18.499992 332,18.499991 330.89542,18.499992 330,17.604562 330,16.499992 L330,10.499992 C330,9.3954229 330.89542,8.4999924 332,8.4999938 z M290,8.4999938 C291.10458,8.4999924 292,9.3954229 292,10.499986 L292,16.499998 C292,17.604562 291.10458,18.499992 290,18.499991 288.89542,18.499992 288,17.604562 288,16.499998 L288,10.499986 C288,9.3954229 288.89542,8.4999924 290,8.4999938 z M260,8.4999938 C261.10458,8.4999924 262,9.3954229 262,10.499986 L262,16.500004 C262,17.604562 261.10458,18.499992 260,18.499991 258.89542,18.499992 258,17.604562 258,16.500004 L258,10.499986 C258,9.3954229 258.89542,8.4999924 260,8.4999938 z M164,8.4999938 C165.10457,8.4999924 166,9.3954229 166,10.499986 L166,16.500004 C166,17.604562 165.10457,18.499992 164,18.499991 162.89543,18.499992 162,17.604562 162,16.500004 L162,10.499986 C162,9.3954229 162.89543,8.4999924 164,8.4999938 z M37.999989,8.4999938 C39.104568,8.4999924 40,9.3954229 39.999989,10.499986 L39.999989,16.500004 C40,17.604562 39.104568,18.499992 37.999989,18.499991 36.895432,18.499992 36,17.604562 35.999992,16.500004 L35.999992,10.499986 C36,9.3954229 36.895432,8.4999924 37.999989,8.4999938 z M326,7.4999976 C327.10458,7.4999924 328,8.3954229 328,9.4999902 L328,17.499995 C328,18.604562 327.10458,19.499992 326,19.499992 324.89542,19.499992 324,18.604562 324,17.499995 L324,9.4999902 C324,8.3954229 324.89542,7.4999924 326,7.4999976 z M314,7.4999976 C315.10458,7.4999924 316,8.3954229 316,9.4999959 L316,17.499989 C316,18.604562 315.10458,19.499992 314,19.499992 312.89542,19.499992 312,18.604562 312,17.499989 L312,9.4999959 C312,8.3954229 312.89542,7.4999924 314,7.4999976 z M296,7.4999976 C297.10458,7.4999924 298,8.3954229 298,9.5000015 L298,17.499983 C298,18.604562 297.10458,19.499992 296,19.499992 294.89542,19.499992 294,18.604562 294,17.499983 L294,9.5000015 C294,8.3954229 294.89542,7.4999924 296,7.4999976 z M254,7.4999976 C255.10457,7.4999924 256,8.3954229 256,9.4999959 L256,17.499989 C256,18.604562 255.10457,19.499992 254,19.499992 252.89543,19.499992 252,18.604562 252,17.499989 L252,9.4999959 C252,8.3954229 252.89543,7.4999924 254,7.4999976 z M61.999992,7.4999976 C63.104568,7.4999924 64,8.3954229 63.999996,9.4999959 L63.999996,17.499989 C64,18.604562 63.104568,19.499992 61.999992,19.499992 60.895432,19.499992 60,18.604562 60,17.499989 L60,9.4999959 C60,8.3954229 60.895432,7.4999924 61.999992,7.4999976 z M44.000008,7.4999976 C45.104568,7.4999924 46,8.3954229 45.999992,9.4999959 L45.999992,17.499989 C46,18.604562 45.104568,19.499992 44.000008,19.499992 42.895432,19.499992 42,18.604562 41.999996,17.499989 L41.999996,9.4999959 C42,8.3954229 42.895432,7.4999924 44.000008,7.4999976 z M344,7.4999862 C345.10458,7.4999924 346,8.3954229 346,9.4999902 L346,17.499995 C346,18.604562 345.10458,19.499992 344,19.499992 342.89542,19.499992 342,18.604562 342,17.499995 L342,9.4999902 C342,8.3954229 342.89542,7.4999924 344,7.4999862 z M176,7.4999862 C177.10457,7.4999924 178,8.3954229 178,9.4999959 L178,17.499989 C178,18.604562 177.10457,19.499992 176,19.499992 174.89543,19.499992 174,18.604562 174,17.499989 L174,9.4999959 C174,8.3954229 174.89543,7.4999924 176,7.4999862 z M158,7.4999862 C159.10457,7.4999924 160,8.3954229 160,9.4999959 L160,17.499989 C160,18.604562 159.10457,19.499992 158,19.499992 156.89543,19.499992 156,18.604562 156,17.499989 L156,9.4999959 C156,8.3954229 156.89543,7.4999924 158,7.4999862 z M92,7.4999862 C93.104568,7.4999924 94,8.3954229 94,9.4999959 L94,17.499989 C94,18.604562 93.104568,19.499992 92,19.499992 90.895432,19.499992 90,18.604562 90,17.499989 L90,9.4999959 C90,8.3954229 90.895432,7.4999924 92,7.4999862 z M308,6.4999957 C309.10458,6.4999924 310,7.3954229 310,8.4999938 L310,18.499991 C310,19.604562 309.10458,20.499992 308,20.49999 306.89542,20.499992 306,19.604562 306,18.499991 L306,8.4999938 C306,7.3954229 306.89542,6.4999924 308,6.4999957 z M302,6.49999 C303.10458,6.4999924 304,7.3954229 304,8.4999938 L304,18.499991 C304,19.604562 303.10458,20.499992 302,20.49999 300.89542,20.499992 300,19.604562 300,18.499991 L300,8.4999938 C300,7.3954229 300.89542,6.4999924 302,6.49999 z M248,6.49999 C249.10457,6.4999924 250,7.3954229 250,8.4999938 L250,18.499991 C250,19.604562 249.10457,20.499992 248,20.499994 246.89543,20.499992 246,19.604562 246,18.499991 L246,8.4999938 C246,7.3954229 246.89543,6.4999924 248,6.49999 z M200,6.49999 C201.10457,6.4999924 202,7.3954229 202,8.4999938 L202,18.499991 C202,19.604562 201.10457,20.499992 200,20.499994 198.89543,20.499992 198,19.604562 198,18.499991 L198,8.4999938 C198,7.3954229 198.89543,6.4999924 200,6.49999 z M188,6.49999 C189.10457,6.4999924 190,7.3954229 190,8.4999938 L190,18.499991 C190,19.604562 189.10457,20.499992 188,20.499994 186.89543,20.499992 186,19.604562 186,18.499991 L186,8.4999938 C186,7.3954229 186.89543,6.4999924 188,6.49999 z M182,6.49999 C183.10457,6.4999924 184,7.3954229 184,8.4999938 L184,18.499991 C184,19.604562 183.10457,20.499992 182,20.499994 180.89543,20.499992 180,19.604562 180,18.499991 L180,8.4999938 C180,7.3954229 180.89543,6.4999924 182,6.49999 z M152,6.49999 C153.10457,6.4999924 154,7.3954229 154,8.4999938 L154,18.499991 C154,19.604562 153.10457,20.499992 152,20.499994 150.89543,20.499992 150,19.604562 150,18.499991 L150,8.4999938 C150,7.3954229 150.89543,6.4999924 152,6.49999 z M116,6.49999 C117.10457,6.4999924 118,7.3954229 118,8.4999938 L118,18.499991 C118,19.604562 117.10457,20.499992 116,20.499994 114.89543,20.499992 114,19.604562 114,18.499991 L114,8.4999938 C114,7.3954229 114.89543,6.4999924 116,6.49999 z M104,6.49999 C105.10457,6.4999924 106,7.3954229 106,8.4999938 L106,18.499991 C106,19.604562 105.10457,20.499992 104,20.499994 102.89543,20.499992 102,19.604562 102,18.499991 L102,8.4999938 C102,7.3954229 102.89543,6.4999924 104,6.49999 z M98,6.49999 C99.104568,6.4999924 100,7.3954229 100,8.4999938 L100,18.499991 C100,19.604562 99.104568,20.499992 98,20.499994 96.895432,20.499992 96,19.604562 96,18.499991 L96,8.4999938 C96,7.3954229 96.895432,6.4999924 98,6.49999 z M56.000004,6.49999 C57.104568,6.4999924 58,7.3954229 58.000011,8.4999938 L58.000011,18.499991 C58,19.604562 57.104568,20.499992 56.000004,20.499994 54.895432,20.499992 54,19.604562 53.999992,18.499991 L53.999992,8.4999938 C54,7.3954229 54.895432,6.4999924 56.000004,6.49999 z M50,6.49999 C51.104568,6.4999924 52,7.3954229 52.000004,8.4999938 L52.000004,18.499991 C52,19.604562 51.104568,20.499992 50,20.499994 48.895432,20.499992 48,19.604562 47.999996,18.499991 L47.999996,8.4999938 C48,7.3954229 48.895432,6.4999924 50,6.49999 z M218,5.5000052 C219.10457,5.4999924 220,6.3954229 220,7.4999862 L220,19.499992 C220,20.604562 219.10457,21.499992 218,21.499991 216.89543,21.499992 216,20.604562 216,19.499992 L216,7.4999862 C216,6.3954229 216.89543,5.4999924 218,5.5000052 z M206,5.5000052 C207.10457,5.4999924 208,6.3954229 208,7.4999862 L208,19.499992 C208,20.604562 207.10457,21.499992 206,21.499991 204.89543,21.499992 204,20.604562 204,19.499992 L204,7.4999862 C204,6.3954229 204.89543,5.4999924 206,5.5000052 z M146,5.5000052 C147.10457,5.4999924 148,6.3954229 148,7.4999862 L148,19.499992 C148,20.604562 147.10457,21.499992 146,21.499991 144.89543,21.499992 144,20.604562 144,19.499992 L144,7.4999862 C144,6.3954229 144.89543,5.4999924 146,5.5000052 z M122,5.5000052 C123.10457,5.4999924 124,6.3954229 124,7.4999862 L124,19.499992 C124,20.604562 123.10457,21.499992 122,21.499991 120.89543,21.499992 120,20.604562 120,19.499992 L120,7.4999862 C120,6.3954229 120.89543,5.4999924 122,5.5000052 z M86,5.5000052 C87.104568,5.4999924 88,6.3954229 88,7.4999976 L88,19.499992 C88,20.604562 87.104568,21.499992 86,21.499991 84.895432,21.499992 84,20.604562 84,19.499992 L84,7.4999976 C84,6.3954229 84.895432,5.4999924 86,5.5000052 z M242,5.4999938 C243.10457,5.4999924 244,6.3954229 244,7.4999976 L244,19.499992 C244,20.604562 243.10457,21.499992 242,21.499991 240.89543,21.499992 240,20.604562 240,19.499992 L240,7.4999976 C240,6.3954229 240.89543,5.4999924 242,5.4999938 z M236,3.4999952 C237.10457,3.4999924 238,4.3954229 238,5.5000052 L238,21.499991 C238,22.604562 237.10457,23.499992 236,23.499995 234.89543,23.499992 234,22.604562 234,21.499991 L234,5.5000052 C234,4.3954229 234.89543,3.4999924 236,3.4999952 z M230,3.4999952 C231.10457,3.4999924 232,4.3954229 232,5.5000052 L232,21.499991 C232,22.604562 231.10457,23.499992 230,23.499995 228.89543,23.499992 228,22.604562 228,21.499991 L228,5.5000052 C228,4.3954229 228.89543,3.4999924 230,3.4999952 z M194,3.4999895 C195.10457,3.4999924 196,4.3954229 196,5.5000052 L196,21.499991 C196,22.604562 195.10457,23.499992 194,23.499995 192.89543,23.499992 192,22.604562 192,21.499991 L192,5.5000052 C192,4.3954229 192.89543,3.4999924 194,3.4999895 z M140,3.4999895 C141.10457,3.4999924 142,4.3954229 142,5.5000052 L142,21.499991 C142,22.604562 141.10457,23.499992 140,23.499995 138.89543,23.499992 138,22.604562 138,21.499991 L138,5.5000052 C138,4.3954229 138.89543,3.4999924 140,3.4999895 z M134,3.4999895 C135.10457,3.4999924 136,4.3954229 136,5.5000052 L136,21.499991 C136,22.604562 135.10457,23.499992 134,23.499995 132.89543,23.499992 132,22.604562 132,21.499991 L132,5.5000052 C132,4.3954229 132.89543,3.4999924 134,3.4999895 z M110,3.4999895 C111.10457,3.4999924 112,4.3954229 112,5.5000052 L112,21.499991 C112,22.604562 111.10457,23.499992 110,23.499995 108.89543,23.499992 108,22.604562 108,21.499991 L108,5.5000052 C108,4.3954229 108.89543,3.4999924 110,3.4999895 z M80,3.4999895 C81.104568,3.4999924 82,4.3954229 82,5.5000052 L82,21.499991 C82,22.604562 81.104568,23.499992 80,23.499995 78.895432,23.499992 78,22.604562 78,21.499991 L78,5.5000052 C78,4.3954229 78.895432,3.4999924 80,3.4999895 z M74,3.4999895 C75.104568,3.4999924 76,4.3954229 76,5.5000052 L76,21.499991 C76,22.604562 75.104568,23.499992 74,23.499995 72.895432,23.499992 72,22.604562 72,21.499991 L72,5.5000052 C72,4.3954229 72.895432,3.4999924 74,3.4999895 z M320,0 C321.10458,-7.6293945E-06 322,0.89542294 322,1.9999981 L322,24.999987 C322,26.104562 321.10458,26.999992 320,26.999985 318.89542,26.999992 318,26.104562 318,24.999987 L318,1.9999981 C318,0.89542294 318.89542,-7.6293945E-06 320,0 z M224,0 C225.10457,-7.6293945E-06 226,0.89542294 226,1.9999924 L226,24.999992 C226,26.104562 225.10457,26.999992 224,26.999985 222.89543,26.999992 222,26.104562 222,24.999992 L222,1.9999924 C222,0.89542294 222.89543,-7.6293945E-06 224,0 z M212,0 C213.10457,-7.6293945E-06 214,0.89542294 214,1.9999981 L214,24.999987 C214,26.104562 213.10457,26.999992 212,26.999985 210.89543,26.999992 210,26.104562 210,24.999987 L210,1.9999981 C210,0.89542294 210.89543,-7.6293945E-06 212,0 z M128,0 C129.10457,-7.6293945E-06 130,0.89542294 130,1.9999981 L130,24.999987 C130,26.104562 129.10457,26.999992 128,26.999985 126.89543,26.999992 126,26.104562 126,24.999987 L126,1.9999981 C126,0.89542294 126.89543,-7.6293945E-06 128,0 z M68,0 C69.104568,-7.6293945E-06 70,0.89542294 70,1.9999981 L70,24.999987 C70,26.104562 69.104568,26.999992 68,26.999985 66.895432,26.999992 66,26.104562 66,24.999987 L66,1.9999981 C66,0.89542294 66.895432,-7.6293945E-06 68,0 z" Style="{StaticResource AudioTrack}"/>
                                                <TextBlock Text="{Binding Message}" Style="{StaticResource MessageStyle}"/>
                                            </StackPanel>
                                        </DockPanel>
                                    </Grid>
                                </Border>
                                <TextBlock Text="{Binding TimeStamp}" >
                                    <TextBlock.Style>
                                        <Style TargetType="{x:Type TextBlock}">
                                            <Setter Property="HorizontalAlignment" Value="Left"/>
                                            <Setter Property="VerticalAlignment" Value="Bottom"/>
                                            <Setter Property="Foreground" Value="#B7B5B8"/>
                                            <Setter Property="Margin" Value="20,0,20,0"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding MessageStatus}" Value="Sent">
                                                    <Setter Property="HorizontalAlignment" Value="Right"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>
                            </Grid>                           
                            
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>
    
    <ListBox Background="Transparent" BorderThickness="0,.05,0,0" ItemsSource="{Binding Messages}"/>
</UserControl>